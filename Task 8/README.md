# Case
Есть 3 репо с app - apps самые что ни на есть простые вроде dev/ops. Единственное условие - apps используют файлик .env для общения с БД и каждый  аботает на произвольном порте (выбор порта на усмотрение, где номер порта > 1024);
На terraform описать создание vpc, subnets, security groups
1. Реализовать пайплайн, который автоматически при коммите в любую ветку любого из 3-ёх репо будет по триггеру пуллить код из этой ветки и запускать  сборку артефакта - докер образ - и класть его в соответствующий ECR (например: 000000.dev.ops.ИМЯ_РЕГИОНА.amazonaws.com/ИМЯ ПРИЛОЖЕНИЯ/) и тегировать именем ветки из которой был собран этот образ; если артефакт прилетел из мастера, то тегируем его как latest;
    - Bonus: для создания образа не использовать мастер ноду дженкинса, а создавать сборочную ноду (через плагин Amazon EC2 Fleet Plugin или подобный, например) у которой idle TTL ~ 300 sec 
2. Реализовать пайплайн в дженкинсе, который будет собирать наши apps (из задачи A) воедино и деплоить их как стек, используя docker swarm.
    - Bonus: Как и в задаче А сборку проводить на сборочной ноде (не мастере). Вручную задавать имя стека;
3. Реализовать возможность ручками выбрать образ из ECR для каждого из app
4. С помощью пайплайна поднять инстанс на который задеплоится стек - для поднятия инстанса использовать terraform файл;
5. Инстанс должен тегироваться тегами вида “имя репозитория": "имя ветки”, а также тегом Owner со значением юзера, который запустил сборку билда - используйте всё тот же terraform файл;
6. Создать базу данных с именем стека и таблицами для каждого app (таблицы обозвать именами app соответственно);
7. Каждый из app должен быть доступен internal DNS имени (типа dev.ops.tasks) - записи должны создаваться во время поднятия инсанса, с помощью всё того же terraform
8. Для обработки запросов к apps использовать прокси (на ваш выбор: haproxy, caddy, nginx, traefik, envoy). Прокси должен уметь обрабатывать запросы к  тдельным app. Также должен быть доступен условный main.ops.tasks (простой index, который даст доступ сразу ко всем 3 apps)

## Bonus track

1. Написать пайплайны (по одному на действия из списка ниже), которые будут
давать возможность вручную:
    - выбирать из списка запущенных инстансов и останавливать выбранный инстанс, на котором запущен стек;
    - выбирать из списка остановленных инстансов и запускать выбранный инстанс;
    - выбирать из списка всех имеющихся стеков и терминейтить выбранный стек вместе с БД
